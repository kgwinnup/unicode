[![JSR](https://jsr.io/badges/@kgwinnup/unicode)](https://jsr.io/@kgwinnup/unicode)

# Unicode library for javascript/typescript

This is a library that enables unicode category matching. This will provide efficient lookup of character sets and
lazily build out all tables as needed. The primary purpose of this unicode library is for writing parsers that need to
understand unicode. The example below creates a set of unicode categories that could be used for say "identifiers" or
"start identifiers".

This library is intended to be used for writing parsers. When writing a parser it is often useful to designate a set of
unicode characters for the start of an identity and another set for the remainder of the identity. This library is
written with that in mind and functions to lazily build the surrogate and larger unicode sets only when needed and only
once.

Nearly all unicode tables are autogenerated from the `unicode.txt` file found
[here](https://www.compart.com/en/unicode/category). Lu, Lt, Ll are copied from
[pyright](https://github.com/microsoft/pyright) because the `unicode.txt` only contains a generic L category.

# Usage

```
import { Char, Unicode, UnicodeCategory } from "@kgwinnup/unicode";

const uc = new Unicode([UnicodeCategory.Lu, UnicodeCategory.Ll]);

if (uc.lookup('A'.charCodeAt(0)) == true) {
    console.log("part of set")
}

if (uc.lookup(Char.A) == true) {
    console.log("part of set")
}
```

The lookup function also supports surrogate pairs.

```
import { Char, Unicode, UnicodeCategory } from "@kgwinnup/unicode";

const uc = new Unicode([UnicodeCategory.Lu, UnicodeCategory.Ll]);

if (uc.lookup('A'.charCodeAt(0)) == true) {
    console.log("part of set")
}

if (uc.lookup(Char.A) == true) {
    console.log("part of set")
}

const str = "êêÄ";
// UnicodeCategory.L is all letters
const uc2 = new Unicode([UnicodeCategory.L], [UnicodeCategory.surrogateL]);
if (uc2.lookup(str.charCodeAt(0), str.charCodeAt(1))) {
    console.log("part of the set");
}

// https://www.compart.com/en/unicode/U+10EAD
// this char should not be a letter
const str2 = "ê∫≠";
if (!uc2.lookup(str2.charCodeAt(0), str2.charCodeAt(1))) {
    console.log("should not be part of the set")
}

// you can also check if the first char is a surrogate char
if (uc.isSurrogate(str2.charCodeAt(0))) {
    console.log("should be a surrogate char")
}
```
